<!doctype html>
<html lang="en"><head>
    <meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Pack Calculator</title>
    <style>
        body{font-family:system-ui,Arial,sans-serif;margin:40px}
        input,button{font-size:16px;padding:8px 10px}
        .card{border:1px solid #ddd;border-radius:12px;padding:20px;max-width:520px}
        .result{margin-top:16px;white-space:pre;font-family:ui-monospace,Consolas,monospace}
    </style>
</head><body>
<h1>Pack Calculator</h1>
<div class="card">
    <label>Items: <input id="items" type="number" min="1" value="251"></label>
    <button id="calc">Calculate</button>
    <div class="result" id="out"></div>
</div>
<script>
    document.getElementById('calc').onclick = async () => {
        const items = document.getElementById('items').value;
        const res = await fetch('/calculate?items='+items);
        const data = await res.json();
        if(!res.ok){ document.getElementById('out').textContent = 'Error: '+(data.error||res.status); return; }
        let lines = [];
        lines.push('Total items sent: '+data.total_items);
        const packs = Object.entries(data.packs_used).sort((a,b)=>Number(b[0])-Number(a[0]));
        for(const [size,count] of packs){
            lines.push(`${count} x ${size}`);
        }
        document.getElementById('out').textContent = lines.join('\n');
    };
</script>
</body></html>